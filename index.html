<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
	<head>
	<title>WS修論システム</title>
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="content-script-type" content="text/javascript" />
	
<!-- CSS部分 -->
	<style>
		body {
			font-family: "Helvetica Neue", helvetica, arial;
			padding: 15px;
		}

		ul {
			list-style: none;
			margin: 0;
			padding: 0;
		}

		ul li {
			line-height: 1.4;
		}
	</style>
<!-- CSS部分 -->


<!-- スクリプト部分 -->
	<script>
	//変数定義(websocket必須)
	var host = location.origin.replace(/^http/, 'ws')			//host
	var ws = new WebSocket(host);								//websocket
	//付け加え変数定義
	var ping_msg = document.getElementById("ping_message");		//ping用
	var chat_ipt;
// = document.getElementById("chat_input");		//chat用文字入力部分
	var chat_btn = document.getElementById("chat_button");		//chat用ボタン
	var chat_fld = document.getElementById("chat_field");		//chat用出力部分
	
	//サーバからデータ受信時のイベント
	ws.onmessage = function (event) {
		document.getElementById("ping_message").innerHTML += JSON.parse(event.data) + "<br/>";
		console.log(JSON.parse(event.data));
		
		//文字の送信のテスト
		if(JSON.parse(event.data) == "test"){
			console.log("テストでうまくいったった");
		}
	};
	
	//送信function
	function send() {
		//サーバに送信
		chat_ipt = document.getElementById("chat_input");
		ws.send(chat_ipt.value);
//		ws.send(document.getElementById("chat_input").value);
		console.log("送信したった");
//		chat_fld += chat_ipt.value;
	}

    </script>
<!-- スクリプト部分終わり -->

</head>
<body>
	<!-- タイトル s-->
	<div class="title_part">
		<h1>WebSocket修論システム</h1>
	</div>

	<!-- chat部分 -->
	<div class="chat_part">
		---サンプル、チャット部分---<br>
		<input type="text" id="chat_input"/>
		<input type="button" id="chat_button" value="send" onclick="send()"/>
		<br>
		<textarea name="chatbox" rows="8" cols="40" id="chat_field">
		</textarea>
		<br><br>
	</div>
	
	<!-- 自分のステータス -->
	<div class="my_status_part">
		---ステータス---<br>
		<!-- 自分のステータス登録 -->
		<div class="my_status_regist">
			登録:<br>
			<button type="my_regist_device" name="button_regist_device" value="regist_device" onclick="onDeviceRadioButton();">デバイス登録</button>
			<button type="change_device" name="button_change_device" value="change_device">デバイス変更</button><br/>
			<!-- デバイス選択ラジオボタン -->
			<form>
				<input type="radio" name="device" id="pc1" value="pc1"/><label for="pc1">PC1</label>
				<input type="radio" name="device" id="pc2" value="pc2"/><label for="pc2">PC2</label>
				<input type="radio" name="device" id="pc3" value="pc3"/><label for="pc3">PC3</label><br/>
				<input type="radio" name="device" id="tablet1" value="tablet1"/><label for="tablet1">Tablet1</label>
				<input type="radio" name="device" id="tablet2" value="tablet2"/><label for="tablet2">Tablet2</label>
				<input type="radio" name="device" id="tablet3" value="tablet3"/><label for="tablet3">Tablet3</label>
			</form>
		</div>
		
		<!-- 自分のステータス確認 -->
		<div class="my_status_check">
			状態:<br>
			デバイス：<nobr id="output_device">未登録</nobr><br>
			接続：<nobr id="output_connection">未登録</nobr><br>
		</div>
	</div>
	
	<!-- デバイス通信状況 -->
	<div class="communication_part">
		<br>---デバイス通信状況---<br>
		パソコン1：<font color="red" id="com_pc1">未接続</font><br>
		パソコン2：<font color="red" id="com_pc2">未接続</font><br>
		パソコン3：<font color="red" id="com_pc3">未接続</font><br>
		タブレット1：<font color="red" id="com_tablet1">未接続</font><br>
		タブレット2：<font color="red" id="com_tablet2">未接続</font><br>
		タブレット3：<font color="red" id="com_tablet3">未接続</font><br>
		<br>
	</div>
	

	<!-- pingボックス:通信を切らないために -->
	<div class="pingbox_part">
		---PINGBOX ＜ 通信を切らないために ＞---<br>
		<textarea name="pingbox" rows="8" cols="40" id="ping_message">
		</textarea>
	</div>
	
  </body>
</html>
